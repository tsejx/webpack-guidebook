<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/webpack-guidebook/umi.css" />
    <script>
      window.routerBase = "/webpack-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.20
    </script>
    <title>Tapable</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/webpack-guidebook-favicon.svg&#x27;)" href="/webpack-guidebook//">Webpack Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/webpack-guidebook//basic-summary">åŸºæœ¬ç»¼è¿°</a><a aria-current="page" class="active" href="/webpack-guidebook//principle-analysis">åŸç†åˆ†æ</a><a href="/webpack-guidebook//best-practice">æœ€ä½³å®è·µ</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/webpack-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/webpack-guidebook-favicon.svg&#x27;)" href="/webpack-guidebook//"></a><h1>Webpack Guidebook</h1><p>Webpack å®Œå…¨çŸ¥è¯†ä½“ç³»</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/webpack-guidebook//basic-summary">åŸºæœ¬ç»¼è¿°</a></li><li><a aria-current="page" class="active" href="/webpack-guidebook//principle-analysis">åŸç†åˆ†æ</a></li><li><a href="/webpack-guidebook//best-practice">æœ€ä½³å®è·µ</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/webpack-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/webpack-guidebook//principle-analysis/babel">Babel</a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle">å·¥ä½œåŸç†</a><ul><li><a href="/webpack-guidebook//principle-analysis/operational-principle/file-watch"><span>æ–‡ä»¶ç›‘å¬</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/hot-module-replacement"><span>æ¨¡å—çƒ­æ›´æ–°</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/filenames-hashes"><span>æ–‡ä»¶æŒ‡çº¹ç­–ç•¥</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/tree-shaking"><span>Tree Shaking</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/scope-hoisting"><span>ä½œç”¨åŸŸæå‡</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/sourcemap"><span>SourceMap</span></a></li></ul></li><li><a aria-current="page" class="active" href="/webpack-guidebook//principle-analysis/implementation-principle">åº•å±‚åŸç†</a><ul><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/workflow"><span>æ„å»ºæµç¨‹</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/simple-implementation"><span>ç®€æ˜“å®ç°</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/source-code-analysis"><span>æºç åˆ†æ</span></a></li><li><a aria-current="page" class="active" href="/webpack-guidebook//principle-analysis/implementation-principle/tapable"><span>Tapable</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/compiler"><span>Compiler</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/compilation"><span>Compilation</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/loader"><span>Loader æœºåˆ¶</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/plugin"><span>Plugin æœºåˆ¶</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/ast"><span>æŠ½è±¡è¯­æ³•æ ‘</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="åŸºæœ¬æ¦‚å¿µ" data-depth="2" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/tapable#åŸºæœ¬æ¦‚å¿µ"><span>åŸºæœ¬æ¦‚å¿µ</span></a></li><li title="ä½¿ç”¨ç¤ºä¾‹" data-depth="2" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/tapable#ä½¿ç”¨ç¤ºä¾‹"><span>ä½¿ç”¨ç¤ºä¾‹</span></a></li><li title="å®ä¾‹é’©å­" data-depth="2" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/tapable#å®ä¾‹é’©å­"><span>å®ä¾‹é’©å­</span></a></li><li title="é’©å­åˆ†ç±»" data-depth="2" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/tapable#é’©å­åˆ†ç±»"><span>é’©å­åˆ†ç±»</span></a></li><li title="ä½¿ç”¨æ–¹å¼" data-depth="3" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/tapable#ä½¿ç”¨æ–¹å¼"><span>ä½¿ç”¨æ–¹å¼</span></a></li><li title="æ‹¦æˆªå™¨" data-depth="2" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/tapable#æ‹¦æˆªå™¨"><span>æ‹¦æˆªå™¨</span></a></li><li title="ä¸Šä¸‹æ–‡" data-depth="2" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/tapable#ä¸Šä¸‹æ–‡"><span>ä¸Šä¸‹æ–‡</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="tapable"><a aria-hidden="true" href="#tapable"><span class="icon icon-link"></span></a>Tapable</h1><p>Webpack æœ¬è´¨ä¸Šæ˜¯ä¸€ç§äº‹ä»¶æµçš„æœºåˆ¶ï¼Œå®ƒçš„å·¥ä½œæµç¨‹å°±æ˜¯å°†å„ä¸ªæ’ä»¶ä¸²è”èµ·æ¥ï¼Œè€Œå®ç°è¿™ä¸€åˆ‡çš„æ ¸å¿ƒå°±æ˜¯ Tapableï¼ŒWebpack ä¸­æœ€æ ¸å¿ƒçš„è´Ÿè´£ç¼–è¯‘çš„ Compiler å’Œè´Ÿè´£åˆ›å»º bundles çš„ Compilation éƒ½æ˜¯ Tapable çš„å­ç±»ï¼Œå¹¶ä¸”å®ä¾‹å†…éƒ¨çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯é€šè¿‡ Tapable åº“æä¾›çš„é’©å­ç±»å®ç°çš„ã€‚</p><h2 id="åŸºæœ¬æ¦‚å¿µ"><a aria-hidden="true" href="#åŸºæœ¬æ¦‚å¿µ"><span class="icon icon-link"></span></a>åŸºæœ¬æ¦‚å¿µ</h2><p><a href="https://github.com/webpack/tapable" target="_blank" rel="noopener noreferrer">Tapable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ˜¯ä¸€ä¸ªå°å‹çš„åº“ï¼Œå…è®¸ä½ å¯¹ä¸€ä¸ª JavaScript æ¨¡å—æ·»åŠ å’Œåº”ç”¨æ’ä»¶ã€‚å®ƒå¯ä»¥è¢«ç»§æ‰¿æˆ–æ··å…¥åˆ°å…¶ä»–æ¨¡å—ä¸­ã€‚</p><p>Tapable æ˜¯ç±»ä¼¼äº Node.js çš„ EventEmitter çš„ç±»ï¼Œä¸“æ³¨äºè‡ªå®šä¹‰äº‹ä»¶çš„è§¦å‘å’Œå¤„ç†ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒTapable è¿˜å…è®¸ä½ é€šè¿‡å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œè®¿é—®äº‹ä»¶çš„ <strong>è§¦å‘è€…</strong>ï¼ˆemitteeï¼‰æˆ– <strong>æä¾›è€…</strong>ï¼ˆproducerï¼‰ï¼Œä»è€Œæ§åˆ¶ç€ Webpack çš„æ’ä»¶ç³»ç»Ÿã€‚</p><p>Tapable æœ‰å››ç»„æˆå‘˜å‡½æ•°ï¼š</p><ul><li><code>plugin(name:string, handler:function)</code>ï¼šå…è®¸å°†ä¸€ä¸ªè‡ªå®šä¹‰æ’ä»¶æ³¨å†Œåˆ° Tapable å®ä¾‹ çš„äº‹ä»¶ä¸­ã€‚å®ƒçš„è¡Œä¸ºå’Œ EventEmitter çš„ <code>on()</code> æ–¹æ³•ç›¸ä¼¼ï¼Œç”¨æ¥æ³¨å†Œä¸€ä¸ªå¤„ç†å‡½æ•°/ç›‘å¬å™¨ï¼Œæ¥åœ¨ä¿¡å·/äº‹ä»¶å‘ç”Ÿæ—¶åšä¸€äº›äº‹æƒ…ã€‚</li><li><code>apply(â€¦pluginInstances: (AnyPlugin|function)[])</code>ï¼š<code>AnyPlugin</code> åº”è¯¥æ˜¯ä¸€ä¸ªæ‹¥æœ‰ <code>apply</code> æ–¹æ³•çš„ç±»ï¼ˆä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä¸å¸¸è§ï¼‰ï¼Œæˆ–è€…åªæ˜¯ä¸€ä¸ªåŒ…å«æ³¨å†Œä»£ç çš„å‡½æ•°ã€‚è¿™ä¸ªæ–¹æ³•åª <strong>è°ƒç”¨</strong> æ’ä»¶çš„å®šä¹‰ï¼Œä»è€Œå°†çœŸæ­£çš„äº‹ä»¶ç›‘å¬å™¨å¯ä»¥æ³¨å†Œåˆ° <em>Tapable</em> å®ä¾‹çš„æ³¨å†Œåˆ—è¡¨ä¸­ã€‚</li><li><code>applyPlugins*(name:string, â€¦)</code>ï¼š<em>Tapable</em> å®ä¾‹å¯ä»¥é€šè¿‡ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œåœ¨æŒ‡å®šçš„ <code>hash</code> ä¸‹åº”ç”¨æ‰€æœ‰çš„æ’ä»¶ã€‚è¿™ä¸€ç»„æ–¹æ³•çš„è¡Œä¸ºå’Œ <code>EventEmitter</code> çš„ <code>emit()</code> æ–¹æ³•ç›¸ä¼¼ï¼Œä½¿ç”¨å¤šç§ç­–ç•¥ç»†è‡´åœ°æ§åˆ¶äº‹ä»¶çš„è§¦å‘ã€‚</li><li><code>mixin(pt: Object)</code>ï¼šä¸€ä¸ªç®€å•åœ°æ–¹æ³•ï¼Œä½¿ç”¨æ··å…¥è€Œä¸æ˜¯ç»§æ‰¿çš„æ–¹å¼æ‰©å±• <code>Tapable</code> çš„åŸå‹ã€‚</li></ul><p>ä¸åŒçš„ <code>applyPlugins*</code> æ–¹æ³•è¦†ç›–äº†ä»¥ä¸‹ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>è¿ç»­åœ°æ‰§è¡Œæ’ä»¶ã€‚</li><li>å¹¶è¡Œåœ°æ‰§è¡Œæ’ä»¶ã€‚</li><li>ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œæ’ä»¶ï¼Œä»å‰é¢çš„æ’ä»¶ï¼ˆç€‘å¸ƒæµï¼‰è·å–è¾“å…¥ã€‚</li><li>å¼‚æ­¥åœ°æ‰§è¡Œæ’ä»¶ã€‚</li><li>åœ¨å…è®¸æ—¶åœæ­¢æ‰§è¡Œæ’ä»¶ï¼šä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä¸€ä¸ªæ’ä»¶è¿”å›äº†ä¸€ä¸ªé <code>undefined</code> å€¼ï¼Œè·³å‡ºæ‰§è¡Œæµï¼Œè¿”å›è¿™ä¸ªæ’ä»¶çš„è¿”å›å€¼ã€‚å¬èµ·æ¥åƒæ˜¯ <code>EventEmitter</code> çš„ <code>once()</code> æ–¹æ³•ï¼Œä½†æ˜¯å®Œå…¨ä¸åŒã€‚</li></ul><h2 id="ä½¿ç”¨ç¤ºä¾‹"><a aria-hidden="true" href="#ä½¿ç”¨ç¤ºä¾‹"><span class="icon icon-link"></span></a>ä½¿ç”¨ç¤ºä¾‹</h2><p><a href="https://webpack.docschina.org/api/compiler" target="_blank" rel="noopener noreferrer">Compiler<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ˜¯ Webpack çš„ä¸€ä¸ªæ ¸å¿ƒ Tapable å®ä¾‹ï¼Œè´Ÿè´£ç¼–è¯‘ Webpack é…ç½®å¯¹è±¡å¹¶è¿”å› <a href="https://webpack.docschina.org/api/compilation" target="_blank" rel="noopener noreferrer">Compilation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å®ä¾‹ã€‚è€Œ Compilation å®ä¾‹æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºæ‰€éœ€çš„ bundlesã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// node_modules/webpacl/lib/Compiler.js
var Tapable = require(&#x27;tapable&#x27;);

function Compiler() {
  Tapable.call(this);
}

Compiler.prototype = Object.create(Tapable.prototype);
" data-status="copy"></button><div class="token-line"><span class="token comment">// node_modules/webpacl/lib/Compiler.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> </span><span class="token maybe-class-name">Tapable</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;tapable&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">Compiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Tapable</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Compiler</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span><span class="token class-name">Tapable</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>ç°åœ¨åœ¨è¿™ä¸ª compiler ä¸Šå†™æ’ä»¶ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// my-custom-plugin.js
function CustomPlugin() {}

CustomPlugin.prototype.apply = function(compiler) {
  compiler.plugin(&#x27;emit&#x27;, pluginFunction);
};
" data-status="copy"></button><div class="token-line"><span class="token comment">// my-custom-plugin.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">CustomPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">CustomPlugin</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">apply</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  compiler</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">&#x27;emit&#x27;</span><span class="token punctuation">,</span><span class="token plain"> pluginFunction</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>compiler ä¼šåœ¨ç”Ÿå‘½å‘¨æœŸä¸­é€‚å½“çš„æ—¶æœºæ‰§è¡Œè¿™ä¸ªæ’ä»¶ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// node_modules/webpacl/lib/Compiler.js

// å°†è·å– `emit` åç§°ä¸‹æ‰€æœ‰æ’ä»¶å¹¶è¿è¡Œå®ƒä»¬
this.apply * (&#x27;emit&#x27;, options);
" data-status="copy"></button><div class="token-line"><span class="token comment">// node_modules/webpacl/lib/Compiler.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// å°†è·å– `emit` åç§°ä¸‹æ‰€æœ‰æ’ä»¶å¹¶è¿è¡Œå®ƒä»¬</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">apply</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;emit&#x27;</span><span class="token punctuation">,</span><span class="token plain"> options</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="å®ä¾‹é’©å­"><a aria-hidden="true" href="#å®ä¾‹é’©å­"><span class="icon icon-link"></span></a>å®ä¾‹é’©å­</h2><p>Tapable åº“æš´éœ²äº†å¾ˆå¤š Hookï¼ˆé’©å­ï¼‰ç±»ï¼Œä¸ºæ’ä»¶æä¾›æŒ‚è½½çš„é’©å­ï¼š</p><table><thead><tr><th>é’©å­</th><th>é’©å…¥æ–¹å¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>Hook</td><td><code>tap</code>ã€<code>tapAsync</code>ã€<code>tapPromise</code></td><td>é’©å­åŸºç±»</td></tr><tr><td>SyncHook</td><td><code>tap</code></td><td>åŒæ­¥é’©å­</td></tr><tr><td>SyncBailHook</td><td><code>tap</code></td><td>åŒæ­¥ç†”æ–­é’©å­ï¼Œåªè¦æ‰§è¡Œçš„ handler æœ‰è¿”å›å€¼ï¼Œå‰©ä½™ handler ä¸æ‰§è¡Œ</td></tr><tr><td>SyncWaterfallHook</td><td><code>tap</code></td><td>åŒæ­¥æµæ°´é’©å­ï¼Œä¸Šä¸ª handler çš„è¿”å›å€¼ä½œä¸ºä¸‹ä¸ª handler çš„è¾“å…¥å€¼</td></tr><tr><td>SyncLoopHook</td><td><code>tap</code></td><td>åŒæ­¥å¾ªç¯é’©å­ï¼Œåªè¦æ‰§è¡Œçš„ handler æœ‰è¿”å›å€¼ï¼Œä¸€ç›´å¾ªç¯æ‰§è¡Œæ­¤ handler</td></tr><tr><td>AsyncParallelHook</td><td><code>tap</code>ã€<code>tapAsync</code>ã€<code>tapPromise</code></td><td>å¼‚æ­¥å¹¶å‘é’©å­ï¼Œhandler å¹¶è¡Œè§¦å‘</td></tr><tr><td>AsyncParallelBailHook</td><td><code>tap</code>ã€<code>tapAsync</code>ã€<code>tapPromise</code></td><td>å¼‚æ­¥å¹¶å‘ç†”æ–­é’©å­ï¼Œhandler å¹¶è¡Œè§¦å‘ï¼Œä½†æ˜¯è·Ÿ handler å†…éƒ¨è°ƒç”¨å›è°ƒå‡½æ•°çš„é€»è¾‘æœ‰å…³</td></tr><tr><td>AsyncSeriesHook</td><td><code>tap</code>ã€<code>tapAsync</code>ã€<code>tapPromise</code></td><td>å¼‚æ­¥ä¸²è¡Œé’©å­ï¼Œhandler ä¸²è¡Œè§¦å‘</td></tr><tr><td>AsyncSeriesBailHook</td><td><code>tap</code>ã€<code>tapAsync</code>ã€<code>tapPromise</code></td><td>å¼‚æ­¥ä¸²è¡Œç†”æ–­é’©å­ï¼Œhandler å¹¶è¡Œè§¦å‘ï¼Œä½†æ˜¯è·Ÿ handler å†…éƒ¨è°ƒç”¨å›è°ƒå‡½æ•°çš„é€»è¾‘æœ‰å…³</td></tr><tr><td>AsyncSeriesWaterfallHook</td><td><code>tap</code>ã€<code>tapAsync</code>ã€<code>tapPromise</code></td><td>å¼‚æ­¥ä¸²è¡Œæµæ°´é’©å­ï¼Œä¸Šä¸ª handler å¯ä»¥æ ¹æ®å†…éƒ¨çš„å›è°ƒå‡½æ•°ä¼ ç»™ä¸‹ä¸ª handler</td></tr></tbody></table><p><strong>Hook Helper ä¸ Tapable ç±»</strong></p><table><thead><tr><th>åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>HookCodeFactory</td><td>ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œ fn çš„å·¥å‚ç±»</td></tr><tr><td>HookMap</td><td>Map ç»“æ„ï¼Œå­˜å‚¨å¤šä¸ª Hook å®ä¾‹</td></tr><tr><td>MutiHook</td><td>ç»„åˆå¤šä¸ª Hook å®ä¾‹</td></tr><tr><td>Tapable</td><td>å‘å‰å…¼å®¹è€ç‰ˆæœ¬ï¼Œå®ä¾‹å¿…é¡»æ‹¥æœ‰ Hooks å±æ€§</td></tr></tbody></table><h2 id="é’©å­åˆ†ç±»"><a aria-hidden="true" href="#é’©å­åˆ†ç±»"><span class="icon icon-link"></span></a>é’©å­åˆ†ç±»</h2><p>Hook çš„ç±»å‹å¯ä»¥æŒ‰ç…§ <strong>äº‹ä»¶å›è°ƒçš„è¿è¡Œé€»è¾‘</strong> æˆ–è€… <strong>è§¦å‘äº‹ä»¶çš„æ–¹å¼</strong> æ¥åˆ†ç±»ã€‚</p><p><strong>äº‹ä»¶å›è°ƒçš„è¿è¡Œé€»è¾‘</strong></p><table><thead><tr><th>ç±»å‹</th><th>æ–¹æ³•</th></tr></thead><tbody><tr><td>Basic</td><td>åŸºç¡€ç±»å‹ï¼Œå•çº¯çš„è°ƒç”¨æ³¨å†Œçš„äº‹ä»¶å›è°ƒï¼Œå¹¶å¹¶ä¸å…³å¿ƒå…¶å†…éƒ¨çš„è¿è¡Œé€»è¾‘</td></tr><tr><td>Bail</td><td>ä¿é™©ç±»å‹ï¼Œå½“ä¸€ä¸ªäº‹ä»¶å›è°ƒåœ¨è¿è¡Œæ—¶è¿”å›çš„å€¼ä¸ä¸º <code>undefined</code> æ—¶ï¼Œåœæ­¢åé¢äº‹ä»¶å›è°ƒçš„æ‰§è¡Œ</td></tr><tr><td>Waterfall</td><td>ç€‘å¸ƒç±»å‹ï¼Œå¦‚æœå½“å‰æ‰§è¡Œçš„äº‹ä»¶å›è°ƒè¿”å›å€¼ä¸ä¸º <code>undefined</code>ï¼Œé‚£ä¹ˆå°±æŠŠä¸‹ä¸€ä¸ªäº‹ä»¶å›è°ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ›¿æ¢æˆè¿™ä¸ªå€¼</td></tr><tr><td>Loop</td><td>å¾ªç¯ç±»å‹ï¼Œå¦‚æœå½“å‰æ‰§è¡Œçš„äº‹ä»¶å›è°ƒçš„è¿”å›å€¼ä¸æ˜¯ <code>undefined</code>ï¼Œé‡æ–°ä»ç¬¬ä¸€ä¸ªæ³¨å†Œçš„äº‹ä»¶å›è°ƒå¤„æ‰§è¡Œï¼Œç›´åˆ°å½“å‰æ‰§è¡Œçš„äº‹ä»¶å›è°ƒæ²¡æœ‰è¿”å›å€¼</td></tr></tbody></table><p><strong>è§¦å‘äº‹ä»¶çš„æ–¹å¼</strong></p><table><thead><tr><th>ç±»å‹</th><th>æ–¹æ³•</th></tr></thead><tbody><tr><td>Sync</td><td>åŒæ­¥æ–¹æ³•ã€‚Sync å¼€å¤´çš„ Hook ç±»åªèƒ½ç”¨ <code>tap</code> æ–¹æ³•æ³¨å†Œäº‹ä»¶å›è°ƒï¼Œè¿™ç±»äº‹ä»¶å›è°ƒä¼šåŒæ­¥æ‰§è¡Œï¼›å¦‚æœä½¿ç”¨ <code>tapAsync</code> æˆ–è€… <code>tapPromise</code> æ–¹æ³•æ³¨å†Œåˆ™ä¼š<strong style="color:red">æŠ¥é”™</strong></td></tr><tr><td>AsyncSeries</td><td>å¼‚æ­¥ä¸²è¡Œé’©å­ã€‚Async å¼€å¤´çš„ Hook ç±»ï¼Œæ²¡æ³•ç”¨ <code>call</code> æ–¹æ³•è§¦å‘äº‹ä»¶ï¼Œå¿…é¡»ç”¨ <code>callAsync</code> æˆ–è€… Promise æ–¹æ³•è§¦å‘ï¼›è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½èƒ½è§¦å‘ <code>tap</code>ã€<code>tapAsync</code> å’Œ <code>tapPromise</code> æ³¨å†Œçš„äº‹ä»¶å›è°ƒï¼›AsyncSeries æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œå½“å‰äº‹ä»¶å›è°ƒå¦‚æœæ˜¯å¼‚æ­¥çš„ï¼Œé‚£ä¹ˆä¼šç­‰åˆ°å¼‚æ­¥æ‰§è¡Œå®Œæ¯•æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªäº‹ä»¶å›è°ƒã€‚</td></tr><tr><td>AsyncParallel</td><td>å¼‚æ­¥å¹¶è¡Œæ‰§è¡Œé’©å­ã€‚AsyncParalle ä¼šå¹¶è¡Œæ‰§è¡Œæ‰€æœ‰çš„äº‹ä»¶å›è°ƒ</td></tr></tbody></table><h3 id="ä½¿ç”¨æ–¹å¼"><a aria-hidden="true" href="#ä½¿ç”¨æ–¹å¼"><span class="icon icon-link"></span></a>ä½¿ç”¨æ–¹å¼</h3><p>Tapable æš´éœ²å‡ºæ¥çš„éƒ½æ˜¯ç±»æ–¹æ³•ï¼Œ<code>new</code> ä¸€ä¸ªç±»æ–¹æ³•è·å¾—æˆ‘ä»¬éœ€è¦çš„é’©å­ã€‚</p><p>class æ¥å—æ•°ç»„å‚æ•° <code>options</code>ï¼Œéå¿…ä¼ ã€‚ç±»æ–¹æ³•ä¼šæ ¹æ®ä¼ å‚ï¼Œæ¥å—åŒæ ·æ•°é‡çš„å‚æ•°ã€‚</p><p>ğŸŒ° <strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const hook1 = new SyncHook([&#x27;arg1&#x27;, &#x27;arg2&#x27;, &#x27;arg3&#x27;]);
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> hook1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">SyncHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;arg1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;arg2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;arg3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>Tabpack æä¾›äº† åŒæ­¥ &amp; å¼‚æ­¥ ç»‘å®šé’©å­çš„æ–¹æ³•ï¼Œå¹¶ä¸”ä»–ä»¬éƒ½æœ‰å¸® ID éš¾è¿‡äº‹ä»¶å’Œæ‰§è¡Œäº‹ä»¶å¯¹åº”çš„æ–¹æ³•ã€‚</p><table><thead><tr><th>Async*</th><th>Sync*</th></tr></thead><tbody><tr><td>ç»‘å®šï¼š<code>tapAsync/tapPromise/tap</code></td><td>ç»‘å®šï¼š<code>tap</code></td></tr><tr><td>æ‰§è¡Œï¼š<code>callAsync/promise</code></td><td>æ‰§è¡Œï¼š<code>call</code></td></tr></tbody></table><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const hook1 = new SyncHook([&#x27;arg1&#x27;, &#x27;arg2&#x27;, &#x27;arg3&#x27;]);

// ç»‘å®šäº‹ä»¶åˆ° Webpack äº‹ä»¶æµ
hook1.tap(&#x27;hook1&#x27;, (arg1, arg2, arg3) =&gt; console.log(arg1, arg2, arg3));

// æ‰§è¡Œç»‘å®šçš„äº‹ä»¶
hook1.call(1, 2, 3);
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> hook1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">SyncHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;arg1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;arg2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;arg3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// ç»‘å®šäº‹ä»¶åˆ° Webpack äº‹ä»¶æµ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">hook1</span><span class="token punctuation">.</span><span class="token method function property-access">tap</span><span class="token punctuation">(</span><span class="token string">&#x27;hook1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">arg1</span><span class="token parameter punctuation">,</span><span class="token parameter"> arg2</span><span class="token parameter punctuation">,</span><span class="token parameter"> arg3</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">arg1</span><span class="token punctuation">,</span><span class="token plain"> arg2</span><span class="token punctuation">,</span><span class="token plain"> arg3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// æ‰§è¡Œç»‘å®šçš„äº‹ä»¶</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">hook1</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="æ‹¦æˆªå™¨"><a aria-hidden="true" href="#æ‹¦æˆªå™¨"><span class="icon icon-link"></span></a>æ‹¦æˆªå™¨</h2><p>æ‰€æœ‰é’©å­éƒ½æä¾›é¢å¤–çš„æ‹¦æˆªå™¨ï¼ˆInterceptionï¼‰ APIï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// æ³¨å†Œæ‹¦æˆªå™¨
compiler.hooks.calculateRoutes.intercept({
  call: (source, target, routesList) =&gt; {
    console.log(&#x27;Starting to calculate routes.&#x27;);
  },
  register: tapInfo =&gt; {
    // tapInfo = { type: &#x27;promise&#x27;, name: &#x27;GoogleMapsPlugin&#x27;, fn: ... }
    console.log(`${tapInfo.name} is doing sth.`);
    return tapInfo;
  },
});
" data-status="copy"></button><div class="token-line"><span class="token comment">// æ³¨å†Œæ‹¦æˆªå™¨</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">compiler</span><span class="token punctuation">.</span><span class="token property-access">hooks</span><span class="token punctuation">.</span><span class="token property-access">calculateRoutes</span><span class="token punctuation">.</span><span class="token method function property-access">intercept</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function-variable function">call</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token parameter punctuation">,</span><span class="token parameter"> target</span><span class="token parameter punctuation">,</span><span class="token parameter"> routesList</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Starting to calculate routes.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function-variable function">register</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token parameter">tapInfo</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// tapInfo = { type: &#x27;promise&#x27;, name: &#x27;GoogleMapsPlugin&#x27;, fn: ... }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">tapInfo</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string"> is doing sth.</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> tapInfo</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><ul><li><code>call: (...args) =&gt; void</code>ï¼šå½“ä½ çš„é’©å­è§¦å‘ä¹‹å‰ï¼ˆä¹Ÿå°±æ˜¯ <code>call()</code> ä¹‹å‰ï¼‰ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªå‡½æ•°ï¼Œä½ å¯ä»¥è®¿é—®é’©å­çš„å‚æ•°ï¼Œå¤šä¸ªé’©å­æ‰§è¡Œä¸€æ¬¡</li><li><code>tap: (tap:Tap) =&gt; void</code>ï¼šæ¯ä¸ªé’©å­æ‰§è¡Œä¹‹å‰ï¼ˆå¤šä¸ªé’©å­æ‰§è¡Œå¤šä¸ªï¼‰ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªå‡½æ•°</li><li><code>loop: (...args) =&gt; void</code>ï¼šè¿™ä¸ªä¼šä¸ºä½ çš„æ¯ä¸ªå¾ªç¯é’©å­ï¼ˆLoopHookï¼Œå°±æ˜¯ç±»å‹åˆ° Loop çš„ï¼‰è§¦å‘ï¼Œå…·ä½“ä»€ä¹ˆæ—¶å€™æ²¡è¯´</li><li><code>register: (tap: Tap) =&gt; Tap | undefined</code>ï¼šæ¯æ·»åŠ ä¸€ä¸ª Tap éƒ½ä¼šè§¦å‘ä½  interceptor ä¸Šçš„ registerï¼Œä½ ä¸‹ä¸ªæ‹¦æˆªå™¨çš„ register å‡½æ•°å¾—åˆ°çš„å‚æ•°ï¼Œå–å†³äºä½ ä¸Šä¸ª register è¿”å›çš„å€¼ï¼Œæ‰€ä»¥æœ€å¥½è¿”å›ä¸€ä¸ª <code>tap</code> é’©å­</li></ul><h2 id="ä¸Šä¸‹æ–‡"><a aria-hidden="true" href="#ä¸Šä¸‹æ–‡"><span class="icon icon-link"></span></a>ä¸Šä¸‹æ–‡</h2><p>æ’ä»¶å’Œæ‹¦æˆªå™¨éƒ½å¯ä»¥é€‰æ‹©åŠ å…¥ä¸€ä¸ªå¯é€‰çš„ <code>context</code> å¯¹è±¡ï¼Œè¿™ä¸ªå¯ä»¥è¢«ç”¨äºä¼ é€’éšæ„çš„å€¼åˆ°é˜Ÿåˆ—ä¸­çš„æ’ä»¶å’Œæ‹¦æˆªå™¨ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="compiler.hooks.accelerate.intercept({
  context: true,
  tap: (context, tapInfo) =&gt; {
    // tapInfo = { type: &quot;sync&quot;, name: &quot;NoisePlugin&quot;, fn: ... }
    console.log(`${tapInfo.name} is doing it&#x27;s job`);

    // `context` starts as an empty object if at least one plugin uses `context: true`.
    // å¦‚æœæœ€å°‘æœ‰ä¸€ä¸ªæ’ä»¶ä½¿ç”¨ `context` é‚£ä¹ˆcontext ä¸€å¼€å§‹æ˜¯ä¸€ä¸ªç©ºçš„å¯¹è±¡
    // If no plugins use `context: true`, then `context` is undefined
    // å¦‚è¿‡tapè¿›å»çš„æ’ä»¶æ²¡æœ‰ä½¿ç”¨`context` çš„ é‚£ä¹ˆå†…éƒ¨çš„`context` ä¸€å¼€å§‹å°±æ˜¯undefined
    if (context) {
      // Arbitrary properties can be added to `context`, which plugins can then access.
      // ä»»æ„å±æ€§éƒ½å¯ä»¥æ·»åŠ åˆ°`context`, æ’ä»¶å¯ä»¥è®¿é—®åˆ°è¿™äº›å±æ€§
      context.hasMuffler = true;
    }
  },
});

compiler.hooks.accelerate.tap(
  {
    name: &#x27;NoisePlugin&#x27;,
    context: true,
  },
  (context, newSpeed) =&gt; {
    if (context &amp;&amp; context.hasMuffler) {
      console.log(&#x27;Silence...&#x27;);
    } else {
      console.log(&#x27;Vroom!&#x27;);
    }
  }
);
" data-status="copy"></button><div class="token-line"><span class="token plain">compiler</span><span class="token punctuation">.</span><span class="token property-access">hooks</span><span class="token punctuation">.</span><span class="token property-access">accelerate</span><span class="token punctuation">.</span><span class="token method function property-access">intercept</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  context</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function-variable function">tap</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token parameter punctuation">,</span><span class="token parameter"> tapInfo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// tapInfo = { type: &quot;sync&quot;, name: &quot;NoisePlugin&quot;, fn: ... }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">tapInfo</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string"> is doing it&#x27;s job</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// `context` starts as an empty object if at least one plugin uses `context: true`.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// å¦‚æœæœ€å°‘æœ‰ä¸€ä¸ªæ’ä»¶ä½¿ç”¨ `context` é‚£ä¹ˆcontext ä¸€å¼€å§‹æ˜¯ä¸€ä¸ªç©ºçš„å¯¹è±¡</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// If no plugins use `context: true`, then `context` is undefined</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// å¦‚è¿‡tapè¿›å»çš„æ’ä»¶æ²¡æœ‰ä½¿ç”¨`context` çš„ é‚£ä¹ˆå†…éƒ¨çš„`context` ä¸€å¼€å§‹å°±æ˜¯undefined</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">context</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// Arbitrary properties can be added to `context`, which plugins can then access.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// ä»»æ„å±æ€§éƒ½å¯ä»¥æ·»åŠ åˆ°`context`, æ’ä»¶å¯ä»¥è®¿é—®åˆ°è¿™äº›å±æ€§</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      context</span><span class="token punctuation">.</span><span class="token property-access">hasMuffler</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">compiler</span><span class="token punctuation">.</span><span class="token property-access">hooks</span><span class="token punctuation">.</span><span class="token property-access">accelerate</span><span class="token punctuation">.</span><span class="token method function property-access">tap</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;NoisePlugin&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    context</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token parameter punctuation">,</span><span class="token parameter"> newSpeed</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">context </span><span class="token operator">&amp;&amp;</span><span class="token plain"> context</span><span class="token punctuation">.</span><span class="token property-access">hasMuffler</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Silence...&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Vroom!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><hr/><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p><ul><li><a href="https://github.com/webpack/tapable" target="_blank" rel="noopener noreferrer">ğŸ“– webpack/tapable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://webpack.docschina.org/api/tapable/#src/components/Sidebar/Sidebar.jsx" target="_blank" rel="noopener noreferrer">ğŸ“– Webpack ä¸­æ–‡æ–‡æ¡£ï¼šTapable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://zhuanlan.zhihu.com/p/135997214" target="_blank" rel="noopener noreferrer">ğŸ“ Webpack æºç è§£è¯»ï¼šç†è§£ Tapable åŸç†ï¼ˆ2020-04-24ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://zhuanlan.zhihu.com/p/100974318" target="_blank" rel="noopener noreferrer">ğŸ“ Webpack æ ¸å¿ƒåº“ Tapable çš„ä½¿ç”¨ä¸åŸç†åˆ†æï¼ˆ2020-01-06ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://juejin.im/post/5dc169b0f265da4d542092c6" target="_blank" rel="noopener noreferrer">ğŸ“Webpack æ’ä»¶æœºåˆ¶ä¹‹ Tapable æºç è§£æï¼ˆ2019-11-25ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://juejin.im/post/5dcba29f6fb9a04abb01fd77" target="_blank" rel="noopener noreferrer">ğŸ“ ç¼–å†™è‡ªå®šä¹‰ Webpack æ’ä»¶ä»ç†è§£ Tapable å¼€å§‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://juejin.im/post/5dc16519f265da4cf1583eb2" target="_blank" rel="noopener noreferrer">ğŸ“ æ·±å…¥æºç è§£æ Tapable å®ç°åŸç†ï¼ˆ2019-11-05ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://zhuanlan.zhihu.com/p/89443337" target="_blank" rel="noopener noreferrer">ğŸ“ åŸºäºæ•°æ®ç»“æ„ä»æºç è§£æ Webpack æ ¸å¿ƒæ¨¡å— Tapableï¼ˆ2019-10-31ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://juejin.im/post/5d36faa9e51d45109725ff55" target="_blank" rel="noopener noreferrer">ğŸ“ Webpack Tapable ä½¿ç”¨ç ”ç©¶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://juejin.im/post/5beb8875e51d455e5c4dd83f" target="_blank" rel="noopener noreferrer">ğŸ“ å¹²è´§ï¼æ’¸ä¸€ä¸ª Webpack æ’ä»¶ï¼ˆå†…å« Tapable è¯¦è§£+ Webpack æµç¨‹ï¼‰ï¼ˆ2018-11-14ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://zhuanlan.zhihu.com/p/33577267" target="_blank" rel="noopener noreferrer">ğŸ“ å¼‚æ­¥ç¼–ç¨‹å­¦ä¹ ç¬”è®°ä¹‹ Tapable æºç åˆ†æï¼ˆ2018-02-05ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/Webpack-Guidebook/edit/master/docs/principle-analysis/implementation-principle/tapable.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">9/18/2020, 10:19:07 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/webpack-guidebook/umi.js"></script>
    <script src="/webpack-guidebook/docs__principle-analysis__implementation-principle__tapable.md.js"></script>
  </body>
</html>
