<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/webpack-guidebook/umi.css" />
    <script>
      window.routerBase = "/webpack-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.20
    </script>
    <title>Compiler</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/webpack-guidebook-favicon.svg&#x27;)" href="/webpack-guidebook//">Webpack Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/webpack-guidebook//basic-summary">åŸºæœ¬ç»¼è¿°</a><a aria-current="page" class="active" href="/webpack-guidebook//principle-analysis">åŸç†åˆ†æ</a><a href="/webpack-guidebook//best-practice">æœ€ä½³å®è·µ</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/webpack-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/webpack-guidebook-favicon.svg&#x27;)" href="/webpack-guidebook//"></a><h1>Webpack Guidebook</h1><p>Webpack å®Œå…¨çŸ¥è¯†ä½“ç³»</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/webpack-guidebook//basic-summary">åŸºæœ¬ç»¼è¿°</a></li><li><a aria-current="page" class="active" href="/webpack-guidebook//principle-analysis">åŸç†åˆ†æ</a></li><li><a href="/webpack-guidebook//best-practice">æœ€ä½³å®è·µ</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/webpack-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/webpack-guidebook//principle-analysis/babel">Babel</a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle">å·¥ä½œåŸç†</a><ul><li><a href="/webpack-guidebook//principle-analysis/operational-principle/file-watch"><span>æ–‡ä»¶ç›‘å¬</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/hot-module-replacement"><span>æ¨¡å—çƒ­æ›´æ–°</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/filenames-hashes"><span>æ–‡ä»¶æŒ‡çº¹ç­–ç•¥</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/tree-shaking"><span>Tree Shaking</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/scope-hoisting"><span>ä½œç”¨åŸŸæå‡</span></a></li><li><a href="/webpack-guidebook//principle-analysis/operational-principle/sourcemap"><span>SourceMap</span></a></li></ul></li><li><a aria-current="page" class="active" href="/webpack-guidebook//principle-analysis/implementation-principle">åº•å±‚åŸç†</a><ul><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/workflow"><span>æ„å»ºæµç¨‹</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/simple-implementation"><span>ç®€æ˜“å®ç°</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/source-code-analysis"><span>æºç åˆ†æ</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/tapable"><span>Tapable</span></a></li><li><a aria-current="page" class="active" href="/webpack-guidebook//principle-analysis/implementation-principle/compiler"><span>Compiler</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/compilation"><span>Compilation</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/loader"><span>Loader æœºåˆ¶</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/plugin"><span>Plugin æœºåˆ¶</span></a></li><li><a href="/webpack-guidebook//principle-analysis/implementation-principle/ast"><span>æŠ½è±¡è¯­æ³•æ ‘</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="MultiCompiler" data-depth="2" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/compiler#multicompiler"><span>MultiCompiler</span></a></li><li title="äº‹ä»¶é’©å­" data-depth="2" class=""><a href="/webpack-guidebook//principle-analysis/implementation-principle/compiler#äº‹ä»¶é’©å­"><span>äº‹ä»¶é’©å­</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="compiler"><a aria-hidden="true" href="#compiler"><span class="icon icon-link"></span></a>Compiler</h1><p>Webpack çš„ Compiler æ¨¡å—æ˜¯ <strong>ä¸»å¼•æ“</strong>ï¼Œå®ƒé€šè¿‡ Webpack CLI æˆ– Webpack API æˆ– Webpack é…ç½®æ–‡ä»¶ä¼ é€’çš„æ‰€æœ‰é€‰é¡¹ï¼Œåˆ›å»ºå‡ºä¸€ä¸ª compilation å®ä¾‹ã€‚</p><p>å®ƒé€šè¿‡ Webpack API ä¸‹ Webpack.Compiler çš„å¯¼å‡ºã€‚</p><p>Webpack ä½¿ç”¨å®ƒæ¥å®ä¾‹åŒ– compilerï¼Œç„¶åè°ƒç”¨ <code>run</code> æ–¹æ³•ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨ Compiler ç®€å•ç¤ºä¾‹ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ Webpack è‡ªèº«æ˜¯å¦‚ä½•è°ƒç”¨å®ƒéå¸¸æ¥è¿‘ã€‚</p><p>ğŸŒ° <strong>å®˜æ–¹ç¤ºä¾‹ï¼š</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// å¯ä»¥ä» webpack package ä¸­ import å¯¼å…¥
import { Compiler } from &#x27;webpack&#x27;;

// åˆ›å»ºä¸€ä¸ªæ–°çš„ compiler å®ä¾‹
const compiler = new Compiler();

// å¡«å……æ‰€æœ‰å¿…å¤‡çš„ options é€‰é¡¹
compiler.options = {
  // ...
};

// åˆ›å»ºä¸€ä¸ªæ’ä»¶
class LogPlugin {
  apply(compiler) {
    compiler.plugin(&#x27;should-emit&#x27;, compilation =&gt; {
      console.log(&#x27;should I emit?&#x27;);
      return true;
    });
  }
}

// å°† compiler åº”ç”¨åˆ°æ’ä»¶ä¸­
new LogPlugin().apply(compiler);

/* æ·»åŠ å…¶ä»–æ”¯æŒæ’ä»¶ */

// è¿è¡Œç»“æŸåæ‰§è¡Œå›è°ƒ
const callback = (err, stats) =&gt; {
  console.log(&#x27;Compiler å·²ç»å®Œæˆæ‰§è¡Œ&#x27;);
  // æ˜¾ç¤º stats
};

// compiler çš„ run è°ƒç”¨ï¼Œå¹¶ä¼ å…¥ callback
compiler.run(callback);
" data-status="copy"></button><div class="token-line"><span class="token comment">// å¯ä»¥ä» webpack package ä¸­ import å¯¼å…¥</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token maybe-class-name">Compiler</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ compiler å®ä¾‹</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> compiler </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Compiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// å¡«å……æ‰€æœ‰å¿…å¤‡çš„ options é€‰é¡¹</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">compiler</span><span class="token punctuation">.</span><span class="token property-access">options</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// åˆ›å»ºä¸€ä¸ªæ’ä»¶</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">LogPlugin</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    compiler</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">&#x27;should-emit&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token parameter">compilation</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;should I emit?&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// å°† compiler åº”ç”¨åˆ°æ’ä»¶ä¸­</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">LogPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain">compiler</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">/* æ·»åŠ å…¶ä»–æ”¯æŒæ’ä»¶ */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// è¿è¡Œç»“æŸåæ‰§è¡Œå›è°ƒ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">callback</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token parameter punctuation">,</span><span class="token parameter"> stats</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Compiler å·²ç»å®Œæˆæ‰§è¡Œ&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// æ˜¾ç¤º stats</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// compiler çš„ run è°ƒç”¨ï¼Œå¹¶ä¼ å…¥ callback</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">compiler</span><span class="token punctuation">.</span><span class="token method function property-access">run</span><span class="token punctuation">(</span><span class="token plain">callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>Compiler</code> ä¹Ÿæ˜¯æˆ‘ä»¬æ‰€è¯´çš„ <code>Tapable</code> å®ä¾‹ã€‚é€šè¿‡è¿™ç§å®ç°æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼Œå®ƒæ··åˆï¼ˆmixï¼‰äº† <code>Tapable</code> ç±»ï¼Œæ¥ä½¿å®ä¾‹ä¹Ÿå…·å¤‡ <strong>æ³¨å†Œ</strong> å’Œ <strong>è°ƒç”¨æ’ä»¶</strong> åŠŸèƒ½ã€‚å¤§å¤šæ•°é¢å‘ç”¨æˆ·çš„æ’ä»¶ï¼Œè¦é¦–å…ˆåœ¨ <code>Compiler</code> ä¸Šæ³¨å†Œã€‚Compiler è¿è¡Œæœºåˆ¶å¯ä»¥è¢«æå–ä¸ºä»¥ä¸‹è¦ç‚¹ï¼š</p><ul><li>é€šå¸¸æœ‰ä¸€ä¸ª Compiler çš„ä¸»å®ä¾‹ã€‚å¯ä»¥åˆ›å»ºå­ <code>compilers</code> æ¥å§”æ‰˜ç‰¹å®šä»»åŠ¡ã€‚</li><li>åˆ›å»º <code>compiler</code> çš„å¤šæ•°å¤æ‚åº¦ï¼Œåœ¨äºä¸ºå®ƒå¡«å……æ‰€æœ‰ç›¸å…³çš„ <code>options</code> é€‰é¡¹ã€‚</li><li>Webpack é€šè¿‡ <code>WebpackOptionsDefaulter</code> å’Œ <code>WebpackOptionsApply</code>ï¼Œæ¥ä¸“é—¨ä¸º <code>Compiler</code> æä¾›æ‰€éœ€çš„æ‰€æœ‰ <strong>åˆå§‹æ•°æ®</strong>ã€‚</li><li><code>Compiler</code> æ˜¯ä¸€ä¸ªæ‰§è¡Œæœ€ç®€åŠŸèƒ½ï¼Œæ¥ä¿è¯ç”Ÿå‘½å‘¨æœŸè¿è¡Œçš„å‡½æ•°ã€‚å®ƒæŠŠæ‰€æœ‰çš„ <strong>åŠ è½½ï¼ˆloadingï¼‰</strong> / <strong>æ‰“åŒ…ï¼ˆbundlingï¼‰</strong> / <strong>å†™å…¥ï¼ˆwritingï¼‰</strong> å·¥ä½œå§”æ‰˜ç»™å„ç§æ’ä»¶ã€‚</li><li><code>new LogPlugin(args).apply(compiler)</code> å°†æ’ä»¶æ³¨å†Œåˆ° <code>Compiler</code> ç”Ÿå‘½å‘¨æœŸä¸­çš„ä»»ä½•ç‰¹å®šé’©å­äº‹ä»¶ã€‚</li><li><code>Compiler</code> æš´éœ² <code>run</code> æ–¹æ³•ï¼Œå®ƒå¯åŠ¨äº† Webpack æ‰€æœ‰ç¼–è¯‘å·¥ä½œã€‚åœ¨æ‰§è¡Œå®Œæˆåï¼Œä¼šè°ƒç”¨ä¼ é€’ç»™å®ƒçš„ <code>callback</code> å‡½æ•°ã€‚è®°å½• <code>stats</code> å’Œ <code>errors</code> çš„æ‰€æœ‰æœ«ç«¯å·¥ä½œï¼Œéƒ½åœ¨æ­¤å›è°ƒå‡½æ•°ä¸­å®Œæˆã€‚</li></ul><h2 id="multicompiler"><a aria-hidden="true" href="#multicompiler"><span class="icon icon-link"></span></a>MultiCompiler</h2><p>MultiCompiler æ¨¡å—å…è®¸ Webpack åœ¨å•ä¸ª compiler ä¸­è¿è¡Œå¤šä¸ªé…ç½®ã€‚å¦‚æœ Webpack çš„ Node.js API ä¸­çš„ <code>options</code> å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªç”± <code>options</code> æ„æˆçš„æ•°ç»„ï¼Œåˆ™ Webpack ä¼šå¯¹å…¶åº”ç”¨å•ä¸ª <code>compiler</code>ï¼Œå¹¶åœ¨æ‰€æœ‰ <code>compiler</code> æ‰§è¡Œç»“æŸæ—¶ï¼Œè°ƒç”¨ <code>callback</code> æ–¹æ³•ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const Webpack = require(&#x27;webpack&#x27;);

const config1 = {
  entry: &#x27;./index1.js&#x27;,
  output: {
    filename: &#x27;bundle1.js&#x27;,
  },
};

const config2 = {
  entry: &#x27;./index2.js&#x27;,
  output: {
    filename: &#x27;bundle2.js&#x27;,
  },
};

webpack([config1, config2], (err, stats) =&gt; {
  process.stdout.write(stats.toString() + &#x27;\n&#x27;);
});
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token maybe-class-name">Webpack</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> config1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;./index1.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  output</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    filename</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;bundle1.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> config2 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;./index2.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  output</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    filename</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;bundle2.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token plain">config1</span><span class="token punctuation">,</span><span class="token plain"> config2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token parameter punctuation">,</span><span class="token parameter"> stats</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  process</span><span class="token punctuation">.</span><span class="token property-access">stdout</span><span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token plain">stats</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&#x27;\n&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="äº‹ä»¶é’©å­"><a aria-hidden="true" href="#äº‹ä»¶é’©å­"><span class="icon icon-link"></span></a>äº‹ä»¶é’©å­</h2><p>ä¸€ä¸ªå‚è€ƒæŒ‡å—ï¼Œåˆ—å‡º Compiler æš´éœ²çš„æ‰€æœ‰äº‹ä»¶é’©å­ã€‚</p><table><thead><tr><th>äº‹ä»¶åç§°</th><th>å†…å®¹è¯´æ˜</th><th>å‚æ•°</th><th>ç±»å‹</th></tr></thead><tbody><tr><td><code>entry-option</code></td><td>-</td><td>-</td><td>basicResult</td></tr><tr><td><code>after-plugins</code></td><td>è®¾ç½®å®Œä¸€ç»„åˆå§‹åŒ–æ’ä»¶ä¹‹å</td><td><code>compiler</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>after-resolvers</code></td><td>è®¾ç½®å®Œ resolvers ä¹‹å</td><td><code>compiler</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>environment</code></td><td>-</td><td>-</td><td>sync åŒæ­¥</td></tr><tr><td><code>after-environment</code></td><td>ç¯å¢ƒè®¾ç½®å®Œæˆ</td><td>-</td><td>sync åŒæ­¥</td></tr><tr><td><code>before-run</code></td><td><code>compiler.run()</code> å¼€å§‹</td><td><code>compiler</code></td><td>async å¼‚æ­¥</td></tr><tr><td><code>run</code></td><td>åœ¨è¯»å–è®°å½•ä¹‹å‰</td><td><code>compiler</code></td><td>async å¼‚æ­¥</td></tr><tr><td><code>watch-run</code></td><td>åœ¨å¼€å§‹ç¼–è¯‘ä¹‹å‰ï¼Œwatch ä¹‹å</td><td><code>compiler</code></td><td>async å¼‚æ­¥</td></tr><tr><td><code>normal-module-factory</code></td><td>åˆ›å»ºå‡ºä¸€ä¸ª <code>NormalModuleFactory</code> ä¹‹å</td><td><code>normalModuleFactory</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>context-module-factory</code></td><td>åˆ›å»ºå‡ºä¸€ä¸ª <code>ContextModuleFactory</code> ä¹‹å</td><td><code>contextModuleFactory</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>before-compile</code></td><td>compilation çš„å‚æ•°å·²åˆ›å»º</td><td><code>compilationParams</code></td><td>async å¼‚æ­¥</td></tr><tr><td><code>compile</code></td><td>åœ¨åˆ›å»ºæ–° compilation ä¹‹å‰</td><td><code>compilationParams</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>this-compilation</code></td><td>åœ¨è§¦å‘ <code>compilation</code> äº‹ä»¶ä¹‹å‰</td><td><code>compilation</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>compilation</code></td><td>compilation åˆ›å»ºå®Œæˆ</td><td><code>compilation</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>make</code></td><td>-</td><td><code>compilation</code></td><td>parallel å¹³è¡Œ</td></tr><tr><td><code>after-compile</code></td><td>-</td><td><code>compilation</code></td><td>async å¼‚æ­¥</td></tr><tr><td><code>should-emit</code></td><td>æ­¤æ—¶å¯ä»¥è¿”å› true/false</td><td><code>compilation</code></td><td>bailResult</td></tr><tr><td><code>need-additional-pass</code></td><td>-</td><td>-</td><td>bailResult</td></tr><tr><td><code>emit</code></td><td>åœ¨ç”Ÿæˆèµ„æºå¹¶è¾“å‡ºåˆ°ç›®å½•ä¹‹å‰</td><td><code>compilation</code></td><td>async å¼‚æ­¥</td></tr><tr><td><code>after-emit</code></td><td>åœ¨ç”Ÿæˆèµ„æºå¹¶è¾“å‡ºåˆ°ç›®å½•ä¹‹å</td><td><code>compilation</code></td><td>async å¼‚æ­¥</td></tr><tr><td><code>done</code></td><td>å®Œæˆç¼–è¯‘</td><td><code>stats</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>failed</code></td><td>ç¼–è¯‘å¤±è´¥</td><td><code>error</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>invalid</code></td><td>åœ¨æ— æ•ˆçš„ watch ç¼–è¯‘ä¹‹å</td><td><code>fileName</code>ã€<code>changeTime</code></td><td>sync åŒæ­¥</td></tr><tr><td><code>watch-close</code></td><td>åœ¨åœæ­¢ watch ç¼–è¯‘ä¹‹å</td><td>-</td><td>sync åŒæ­¥</td></tr></tbody></table><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ <code>emit</code> äº‹ä»¶å¤„ç†å‡½æ•°çš„ç¤ºä¾‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="compiler.plugin(&#x27;emit&#x27;, function(compilation, callback) {
  // æ‰§è¡Œä¸€äº›å¼‚æ­¥...
  setTimeout(function() {
    console.log(&#x27;å¼‚æ­¥è¿è¡Œå®Œæˆ...&#x27;);
    callback();
  }, 1000);
});
" data-status="copy"></button><div class="token-line"><span class="token plain">compiler</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">&#x27;emit&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token parameter punctuation">,</span><span class="token parameter"> callback</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// æ‰§è¡Œä¸€äº›å¼‚æ­¥...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;å¼‚æ­¥è¿è¡Œå®Œæˆ...&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><hr/><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p><ul><li><a href="https://webpack.docschina.org/api/compiler" target="_blank" rel="noopener noreferrer">ğŸ“– Webpack ä¸­æ–‡å®˜ç½‘ï¼šCompiler<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://www.webpackjs.com/api/compiler-hooks/" target="_blank" rel="noopener noreferrer">ğŸ“– Compiler æ¨¡å—é’©å­<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://imweb.io/topic/5da1397aaf03a41f046a8df1" target="_blank" rel="noopener noreferrer">ğŸ“ Webpack æºç é˜…è¯»ä¹‹ Compilerï¼ˆ2019-10-12ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/Webpack-Guidebook/edit/master/docs/principle-analysis/implementation-principle/compiler.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">9/18/2020, 10:19:07 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/webpack-guidebook/umi.js"></script>
    <script src="/webpack-guidebook/docs__principle-analysis__implementation-principle__compiler.md.js"></script>
  </body>
</html>
